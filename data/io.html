<!DOCTYPE html>
<html lang="en">
<head>
  <title>io</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <link type="text/css" rel="stylesheet" href="style.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-switch/3.3.4/js/bootstrap-switch.js" data-turbolinks-track="true"></script>
</head>
<body>
    <div class="container-fluid">
        <!-- Second navbar for categories -->
        <nav class="navbar navbar-inverse navbar-fixed-top">
            <div class="container">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">WIFIRELAY</a>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="navbar-collapse-1">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="auth.html">authentication</a></li>
                        <li class="active"><a href="io.html">i/o</a></li>
                        <li><a href="relay.html">relay</a></li>
                        <li><a href="analog.html">analog</a></li>
                        <li><a href="datetime.html">date & time</a></li>
                        <li><a href="about.html">about</a></li>
                    </ul>
                </div><!-- /.navbar-collapse -->
            </div><!-- /.container -->
        </nav><!-- /.navbar -->
    </div>
    <br/>
    <br/>
    <br/>
    <br/>

<div class="container">
    <div class="row">
        <h3 class="text-danger text-center">IO Management Page</h3>
        <div class="row">
            <div class="col-sm-2 col-md-2  col-lg-2"></div>
            <div class="col-sm-8 col-md-8 col-lg-8">
                <p class="text-center text-info">The IOs are pullup lines. 5V is logic high. 0V is logic low.</p>
                <br/>
                <table class="table table-striped table-bordered table-hover table-condensed">
                    <h3 class="text-danger text-center">output status </h3>
                    <hr/>
                    <thead>
                        <tr>
                            <th>Pin Number</th>
                            <th>Direction</th>
                            <th>Status</th>
                            <th>Startup Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- gpio-->
                        <tr>
                            <td>I/O pin 1</td>
                            <td>
                                <div>
                                      <label class="switch">
                                          <input type="checkbox" id="io-1-direction" name="1" onclick="gpio_set_dir(this);">
                                          <span class="slider"></span>
                                      </label>
                                  </div>
                            </td>
                            <td>
                                <div>
                                      <label class="switch">
                                          <input type="checkbox" id="io-1-operating-status">
                                          <span class="slider"></span>
                                      </label>
                                  </div>
                            </td>
                            <td>
                                <div>
                                      <label class="switch">
                                          <input type="checkbox" id="io-1-startup-status" name="1" onclick="gpio_startup_status(this);">
                                          <span class="slider"></span>
                                      </label>
                                  </div>
                            </td>
                        </tr>
                        <!-- /gpio-->

                        <!-- gpio-->
                        <tr>
                            <td>I/O pin 2</td>
                            <td>
                                <div>
                                      <label class="switch">
                                          <input type="checkbox" id="io-2-direction" name="2" onclick="gpio_set_dir(this);">
                                          <span class="slider"></span>
                                      </label>
                                  </div>
                            </td>
                            <td>
                                <div>
                                      <label class="switch">
                                          <input type="checkbox" id="io-2-operating-status">
                                          <span class="slider"></span>
                                      </label>
                                  </div>
                            </td>
                            <td>
                                <div>
                                      <label class="switch">
                                          <input type="checkbox" id="io-2-startup-status" name="2" onclick="gpio_startup_status(this);">
                                          <span class="slider"></span>
                                      </label>
                                  </div>
                            </td>
                        </tr>
                        <!-- /gpio-->

                        <!-- gpio-->
                        <tr>
                            <td>I/O pin 3</td>
                            <td>
                                <div>
                                      <label class="switch">
                                          <input type="checkbox" id="io-3-direction" name="3" onclick="gpio_set_dir(this);">
                                          <span class="slider"></span>
                                      </label>
                                  </div>
                            </td>
                            <td>
                                <div>
                                      <label class="switch">
                                          <input type="checkbox" id="io-3-operating-status">
                                          <span class="slider"></span>
                                      </label>
                                  </div>
                            </td>
                            <td>
                                <div>
                                      <label class="switch">
                                          <input type="checkbox" id="io-3-startup-status" name="3" onclick="gpio_startup_status(this);">
                                          <span class="slider"></span>
                                      </label>
                                  </div>
                            </td>
                        </tr>
                        <!-- /gpio-->

                        <!-- gpio-->
                        <tr>
                            <td>I/O pin 4</td>
                            <td>
                                <div>
                                      <label class="switch">
                                          <input type="checkbox" id="io-4-direction" name="4" onclick="gpio_set_dir(this);">
                                          <span class="slider"></span>
                                      </label>
                                  </div>
                            </td>
                            <td>
                                <div>
                                      <label class="switch">
                                          <input type="checkbox" id="io-4-operating-status">
                                          <span class="slider"></span>
                                      </label>
                                  </div>
                            </td>
                            <td>
                                <div>
                                      <label class="switch">
                                          <input type="checkbox" id="io-4-startup-status" name="4" onclick="gpio_startup_status(this);">
                                          <span class="slider"></span>
                                      </label>
                                  </div>
                            </td>
                        </tr>
                        <!-- /gpio-->

                        <!-- gpio-->
                        <tr>
                            <td>I/O pin 5</td>
                            <td>
                                <div>
                                    <label class="switch">
                                    <input type="checkbox" id="io-5-direction" name="5" onclick="gpio_set_dir(this);">
                                    <span class="slider"></span>
                                    </label>
                                  </div>
                            </td>
                            <td>
                                <div>
                                      <label class="switch">
                                          <input type="checkbox" id="io-5-operating-status" >
                                          <span class="slider"></span>
                                      </label>
                                  </div>
                            </td>
                            <td>
                                <div>
                                      <label class="switch">
                                          <input type="checkbox" id="io-5-startup-status" name="5" onclick="gpio_startup_status(this);">
                                          <span class="slider"></span>
                                      </label>
                                  </div>
                            </td>
                        </tr>
                        <!-- /gpio-->

                        <!-- gpio-->
                        <tr>
                            <td>I/O pin 6</td>
                            <td>
                                <div>
                                    <label class="switch">
                                    <input type="checkbox" id="io-6-direction" name="6"onclick="gpio_set_dir(this);">
                                    <span class="slider"></span>
                                    </label>
                                  </div>
                            </td>
                            <td>
                                <div>
                                      <label class="switch">
                                          <input type="checkbox" id="io-6-operating-status" >
                                          <span class="slider"></span>
                                      </label>
                                  </div>
                            </td>
                            <td>
                                <div>
                                      <label class="switch">
                                          <input type="checkbox" id="io-6-startup-status"name="6" onclick="gpio_startup_status(this);">
                                          <span class="slider"></span>
                                      </label>
                                  </div>
                            </td>
                        </tr>
                        <!-- /gpio-->

                        <!-- gpio-->
                        <tr>
                            <td>I/O pin 7</td>
                            <td>
                                <div>
                                    <label class="switch">
                                    <input type="checkbox" id="io-7-direction" name="7"onclick="gpio_set_dir(this);">
                                    <span class="slider"></span>
                                    </label>
                                  </div>
                            </td>
                            <td>
                                <div>
                                      <label class="switch">
                                          <input type="checkbox" id="io-7-operating-status" >
                                          <span class="slider"></span>
                                      </label>
                                  </div>
                            </td>
                            <td>
                                <div>
                                      <label class="switch">
                                          <input type="checkbox" id="io-7-startup-status" name="7"onclick="gpio_startup_status(this);">
                                          <span class="slider"></span>
                                      </label>
                                  </div>
                            </td>
                        </tr>
                        <!-- /gpio-->

                        <!-- gpio-->
                        <tr>
                            <td>I/O pin 8</td>
                            <td>
                                <div>
                                    <label class="switch">
                                    <input type="checkbox" id="io-8-direction" name="8"onclick="gpio_set_dir(this);">
                                    <span class="slider"></span>
                                    </label>
                                  </div>
                            </td>
                            <td>
                                <div>
                                      <label class="switch">
                                          <input type="checkbox" id="io-8-operating-status" >
                                          <span class="slider"></span>
                                      </label>
                                  </div>
                            </td>
                            <td>
                                <div>
                                      <label class="switch">
                                          <input type="checkbox" id="io-8-startup-status" name="8"onclick="gpio_startup_status(this);">
                                          <span class="slider"></span>
                                      </label>
                                  </div>
                            </td>
                        </tr>
                        <!-- /gpio-->


                    </tbody>
                </table>

            </div>
            <div class="col-sm-2 col-md-2  col-lg-2"></div>
        </div>
    </div>
</div>

<script>

var io_dir_config = {};
var io_dir_cmd;
var io_startup_config = {};
var io_startup_cmd;
var Socket;
Socket = new WebSocket('ws://'+window.location.hostname+':81/');


function gpio_set_dir(d)
{
    var checkbox_dir = document.getElementById(d.getAttribute('id'));
    if (checkbox_dir.checked)
    {
        io_dir_config['io'] = d.getAttribute('name');
        io_dir_config['dir'] = 'output';
    }
    else
    {
        io_dir_config['io'] = d.getAttribute('name');
        io_dir_config['dir'] = 'input';
    }
    io_dir_cmd = JSON.stringify(io_dir_config);
    Socket.send(io_dir_cmd);
}



function gpio_startup_status(d)
{
    var checkbox_startup = document.getElementById(d.getAttribute('id'));
    if (checkbox_startup.checked)
    {
        io_startup_config['io'] = d.getAttribute('name');
        io_startup_config['startup'] = 'high';
    }
    else
    {
        io_startup_config['io'] = d.getAttribute('name');
        io_startup_config['startup'] = 'low';
    }
    io_startup_cmd = JSON.stringify(io_startup_config);
    Socket.send(io_startup_cmd);
}


</script>
</body>
</html>
